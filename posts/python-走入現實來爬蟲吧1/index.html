<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><title>Python 走入現實：來爬蟲吧(1) - Jimmy's Code</title>
<meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=Cache-Control content="no-transform"><meta http-equiv=Cache-Control content="no-siteapp"><meta name=theme-color content="#f8f5ec"><meta name=msapplication-navbutton-color content="#f8f5ec"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec"><meta name=author content="r567tw"><meta name=description content="剛剛在想今天要寫什麼的時候&amp;hellip;.突然想到之前其實就有點想寫爬蟲的主題ＸＤ所以就來寫一波！ 淺談網路與網頁 其實我們藉由瀏覽器打入網址"><meta name=keywords content="r567tw,Coding,Programming,Life,Blog"><meta name=generator content="Hugo 0.121.1 with theme even"><link rel=canonical href=https://r567tw.github.io/posts/python-%E8%B5%B0%E5%85%A5%E7%8F%BE%E5%AF%A6%E4%BE%86%E7%88%AC%E8%9F%B2%E5%90%A71/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link href=/sass/main.min.75e9b34406eb06bc8d3f31239cc5f7fc476beabf57adb3ef0632c75958a8a097.css rel=stylesheet><link rel=stylesheet href=/css/custom.css><meta property="og:title" content="Python 走入現實：來爬蟲吧(1)"><meta property="og:description" content="剛剛在想今天要寫什麼的時候&mldr;.突然想到之前其實就有點想寫爬蟲的主題ＸＤ所以就來寫一波！ 淺談網路與網頁 其實我們藉由瀏覽器打入網址"><meta property="og:type" content="article"><meta property="og:url" content="https://r567tw.github.io/posts/python-%E8%B5%B0%E5%85%A5%E7%8F%BE%E5%AF%A6%E4%BE%86%E7%88%AC%E8%9F%B2%E5%90%A71/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-10-16T15:07:02+00:00"><meta property="article:modified_time" content="2018-10-16T15:07:02+00:00"><meta itemprop=name content="Python 走入現實：來爬蟲吧(1)"><meta itemprop=description content="剛剛在想今天要寫什麼的時候&mldr;.突然想到之前其實就有點想寫爬蟲的主題ＸＤ所以就來寫一波！ 淺談網路與網頁 其實我們藉由瀏覽器打入網址"><meta itemprop=datePublished content="2018-10-16T15:07:02+00:00"><meta itemprop=dateModified content="2018-10-16T15:07:02+00:00"><meta itemprop=wordCount content="1607"><meta itemprop=keywords content="python,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Python 走入現實：來爬蟲吧(1)"><meta name=twitter:description content="剛剛在想今天要寫什麼的時候&mldr;.突然想到之前其實就有點想寫爬蟲的主題ＸＤ所以就來寫一波！ 淺談網路與網頁 其實我們藉由瀏覽器打入網址"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script><script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=/ class=logo>Jimmy's Code</a></div><div class=mobile-navbar-icon><span></span>
<span></span>
<span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><a href=/about/><li class=mobile-menu-item>About</li></a><a href=/categories/><li class=mobile-menu-item>Categories</li></a><a href=/posts/><li class=mobile-menu-item>Archives</li></a><a href=https://jimmynotes.netlify.app/><li class=mobile-menu-item>Notes</li></a><a href=/search><li class=mobile-menu-item>Search</li></a></ul></nav><div class=container id=mobile-panel><header id=header class=header><div class=logo-wrapper><a href=/ class=logo>Jimmy's Code</a></div><nav class=site-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=/about/>About</a></li><li class=menu-item><a class=menu-item-link href=/categories/>Categories</a></li><li class=menu-item><a class=menu-item-link href=/posts/>Archives</a></li><li class=menu-item><a class=menu-item-link href=https://jimmynotes.netlify.app/>Notes</a></li><li class=menu-item><a class=menu-item-link href=/search>Search</a></li></ul></nav></header><main id=main class=main><div class=content-wrapper><div id=content class=content><article class=post><header class=post-header><h1 class=post-title>Python 走入現實：來爬蟲吧(1)</h1><div class=post-meta><span class=post-time>2018-10-16</span><div class=post-category><a href=/categories/ithome/>ithome</a></div></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title>Contents</h2><div class=post-toc-content><nav id=TableOfContents><ul><li><a href=#淺談網路與網頁>淺談網路與網頁</a></li><li><a href=#環境建置>環境建置</a></li><li><a href=#牛刀小試一下>牛刀小試一下</a></li></ul></nav></div></div><div class=post-content><p>剛剛在想今天要寫什麼的時候&mldr;.突然想到之前其實就有點想寫爬蟲的主題ＸＤ所以就來寫一波！</p><h1 id=淺談網路與網頁>淺談網路與網頁</h1><p>其實我們藉由瀏覽器打入網址看到的“網頁”，獲得的都是一種“資源”，而這個資源他所回傳的是HTML+CSS＋JS(當然對於‘api’來說，他有可能回傳的是&rsquo;json&rsquo;、’xml‘或者其他類型)。其實說穿了網頁前端說難不難說雜不雜，就是基於這三大天王。當然你會問，那麼我們常說的後端語言：php、ruby、或者是現在我們在談的Python呢？我們總不可能拿前端來連資料庫吧（安全緣故）？沒錯！ 對於開發者的角度來說，我們是用這些後端語言，但如果你發現，其實後端語言都是會由CGI或者後端渲染的引擎，當你試著對網頁開啟右鍵檢查時，他還是HTML+CSS+JS啊！</p><p>這裏還只是淺談，如果要繼續深入的話可以說非常非常多，預計30天鐵人賽都寫不完，這裏我極力推薦某個部落客寫的有關於http的文章以及一些我個人覺得可以更加深入的參考資料，淺顯明瞭、而且我也是讀過了對於網路、瀏覽器有更多的認識呢！</p><ul><li><a href=https://notfalse.net/http-series>NotFalse 技術客所寫的http教學系列</a></li><li><a href=https://ithelp.ithome.com.tw/users/20103745/ironman/1270>來做個網路瀏覽器吧！Let&rsquo;s build a web browser! 系列</a>：去年某大大寫的鐵人賽系列，看不懂沒關係，我也看不是太懂XD 但前面幾篇文章多少對於瀏覽器如何運作或者網路如何操作會有更多的了解</li><li><a href=https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol>維基</a>或者google: 當然你也可以用wiki或自行google來幫助自己更加了解</li></ul><p><em><strong>總之，我們可以知道我們爬回來的東西就是一連串的文字，就是HTML+CSS+JS/除非你是對API 當然就獲得其他類型的資料</strong></em></p><h1 id=環境建置>環境建置</h1><p>如果你不喜歡自己的環境太過髒亂，你想要有‘virtual’ 環境，那非常好，Python3自己有內建，另外我自己或網路上也推薦‘virtualenv’這個modules</p><p>總之，時間不多 let&rsquo;s start!我就先假設大家想要有一個不受污染的環境吧先確定安裝好pip之後請執行</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>pip install virtualenv <span class=c1>#安裝virtualenv這個環境</span>
</span></span><span class=line><span class=cl>virtualenv crawler <span class=c1>#建立一個名字叫做crawler的虛擬環境</span>
</span></span><span class=line><span class=cl><span class=nb>source</span> crawler/bin/activate <span class=c1>#啟動這個crawler 這個環境(for mac)</span>
</span></span><span class=line><span class=cl><span class=se>\c</span>rawler<span class=se>\S</span>cripts<span class=se>\a</span>ctivate.bat <span class=c1>#或者也可以執行這個指令 (for windows) [參考](https://programwithus.com/learn-to-code/Pip-and-virtualenv-on-Windows/)</span>
</span></span></code></pre></td></tr></table></div></div><p>你的環境如果有啟動的話應該可以看到你們前面會有個類似<code>(crawler)</code>的字樣。要離開的話就使用&rsquo;deactivate&rsquo;這個指令吧！在虛擬環境之下/或者直接本機請安裝幾個會需要用到爬蟲的module吧！</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>pip install requests <span class=c1>#安裝一個可以發出網路request的module</span>
</span></span><span class=line><span class=cl>pip install BeautifulSoup4 <span class=c1>#可以用這個module分析回傳回來的html+css+js</span>
</span></span></code></pre></td></tr></table></div></div><h1 id=牛刀小試一下>牛刀小試一下</h1><p>在想要不要一口氣談完爬蟲的同時我發現時間很晚了，所以就只好分個幾天慢慢說明好了。前面說到我們的爬蟲通常會拿回來HTML+CSS+JS，那我們就來驗證一下吧！建立crawler.py</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>requests</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>bs4</span> <span class=kn>import</span> <span class=n>BeautifulSoup</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>content</span><span class=o>=</span><span class=n>request</span><span class=o>.</span><span class=n>content</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>content</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>執行後你看到了什麼呢？是不是html+css+js呢？
或者你也可以使用</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=n>content</span><span class=p>))</span>
</span></span></code></pre></td></tr></table></div></div><p>回傳了<code>&lt;class 'bytes'></code>bytes就是檔案的最小單位。</p><p>如果還是很好奇我說的回傳的html+css+js （因為print出來有什麼x開頭的亂碼）那麼我們試著把回傳回來的bytes 轉成string 寫入檔案中，我們可以這樣改寫：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>requests</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>bs4</span> <span class=kn>import</span> <span class=n>BeautifulSoup</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>content</span><span class=o>=</span><span class=n>request</span><span class=o>.</span><span class=n>content</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>file</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s1>&#39;result.txt&#39;</span><span class=p>,</span><span class=s1>&#39;w&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>file</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>content</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>))</span>
</span></span></code></pre></td></tr></table></div></div><p>執行後看看result.txt是不是就是網站的html+css+js呢？</p><p>如果你今天頑皮一點把<code>result.txt</code>改為<code>result.html</code>呢？哈哈！ 打開<code>result.html</code>就是"很像"的yahoo首頁啦～～ XD 但應該是不能work的首頁啦，畢竟你只是copy前端，yahoo的背後還有很多眉眉角角呢（我們剛剛談到的後端開發語言或資料庫或圖片等等）</p></div><footer class=post-footer><div class=post-tags><a href=/tags/python/>python</a></div><nav class=post-nav><a class=prev href=/posts/python-%E8%B5%B0%E5%85%A5%E7%8F%BE%E5%AF%A6%E4%BE%86%E7%88%AC%E8%9F%B2%E5%90%A72/><i class="iconfont icon-left"></i>
<span class="prev-text nav-default">Python 走入現實：來爬蟲吧(2)</span>
<span class="prev-text nav-mobile">Prev</span>
</a><a class=next href=/posts/python-%E8%B5%B0%E5%85%A5%E7%8F%BE%E5%AF%A6%E6%AA%94%E6%A1%88/><span class="next-text nav-default">Python 走入現實：檔案</span>
<span class="next-text nav-mobile">Next</span>
<i class="iconfont icon-right"></i></a></nav></footer></article></div></div></main><footer id=footer class=footer><div class=social-links></div><div class=copyright><span class=power-by>Powered by <a class=hexo-link href=https://gohugo.io>Hugo</a>
</span><span class=division>|</span>
<span class=theme-info>Theme -
<a class=theme-link href=https://github.com/olOwOlo/hugo-theme-even>Even</a>
</span><span class=copyright-year>&copy;
2017 -
2023<span class=heart><i class="iconfont icon-heart"></i></span>
<span>r567tw</span></span></div></footer><div class=back-to-top id=back-to-top><i class="iconfont icon-up"></i></div></div><script src=https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin=anonymous></script><script type=text/javascript src=/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-7PPECL3Q0"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-7PPECL3Q0")</script></body></html>