<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>ç¶œåˆæ‡‰ç”¨(4) ä½¿ç”¨ Laravel åšä¸€å€‹ç°¡å–®çš„éƒ¨è½æ ¼ï¼šè¤‡ç¿’-ä¸‹ - Jimmy's Code</title><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><meta name=theme-color content="#f8f5ec"><meta name=msapplication-navbutton-color content="#f8f5ec"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec"><meta name=author content="r567tw"><meta name=description content="æ¥ä¸‹ä¾†åˆ°è©²ç¯‡ç« æœ€å¾Œä¸€å€‹å°ç¯€ï¼Œè®“æˆ‘å€‘æŠŠå‰©ä¸‹çš„æ–°å¢ã€ä¿®æ”¹ã€åˆªé™¤éƒ½åšå¥½å§ï¼ é€™æ˜¯æ¥çºŒå‰å…©å¤©çš„å¯¦ä½œï¼Œå¦‚æœä¸å¤ªæ¸…æ¥šçš„è©±è¨˜å¾—è¤‡ç¿’ä¸€ä¸‹å‰å…©å¤© ç¶œåˆæ‡‰ç”¨(2) ä½¿"><meta name=keywords content="r567tw,Coding,Programming,Life,Blog"><meta name=generator content="Hugo 0.108.0 with theme even"><link rel=canonical href=https://jimmycode.tw/posts/2019-09-27-%E7%B6%9C%E5%90%88%E6%87%89%E7%94%A84-%E4%BD%BF%E7%94%A8-laravel-%E5%81%9A%E4%B8%80%E5%80%8B%E7%B0%A1%E5%96%AE%E7%9A%84%E9%83%A8%E8%90%BD%E6%A0%BC%E8%A4%87%E7%BF%92-%E4%B8%8B/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link href=/sass/main.min.c93d425e666a2b88b75a503638d131b08a239fd778ebba20c0c4ae6a400a8011.css rel=stylesheet><link rel=stylesheet href=/css/custom.css><meta property="og:title" content="ç¶œåˆæ‡‰ç”¨(4) ä½¿ç”¨ Laravel åšä¸€å€‹ç°¡å–®çš„éƒ¨è½æ ¼ï¼šè¤‡ç¿’-ä¸‹"><meta property="og:description" content="æ¥ä¸‹ä¾†åˆ°è©²ç¯‡ç« æœ€å¾Œä¸€å€‹å°ç¯€ï¼Œè®“æˆ‘å€‘æŠŠå‰©ä¸‹çš„æ–°å¢ã€ä¿®æ”¹ã€åˆªé™¤éƒ½åšå¥½å§ï¼ é€™æ˜¯æ¥çºŒå‰å…©å¤©çš„å¯¦ä½œï¼Œå¦‚æœä¸å¤ªæ¸…æ¥šçš„è©±è¨˜å¾—è¤‡ç¿’ä¸€ä¸‹å‰å…©å¤© ç¶œåˆæ‡‰ç”¨(2) ä½¿"><meta property="og:type" content="article"><meta property="og:url" content="https://jimmycode.tw/posts/2019-09-27-%E7%B6%9C%E5%90%88%E6%87%89%E7%94%A84-%E4%BD%BF%E7%94%A8-laravel-%E5%81%9A%E4%B8%80%E5%80%8B%E7%B0%A1%E5%96%AE%E7%9A%84%E9%83%A8%E8%90%BD%E6%A0%BC%E8%A4%87%E7%BF%92-%E4%B8%8B/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-09-26T18:08:38+00:00"><meta property="article:modified_time" content="2019-09-26T18:08:38+00:00"><meta itemprop=name content="ç¶œåˆæ‡‰ç”¨(4) ä½¿ç”¨ Laravel åšä¸€å€‹ç°¡å–®çš„éƒ¨è½æ ¼ï¼šè¤‡ç¿’-ä¸‹"><meta itemprop=description content="æ¥ä¸‹ä¾†åˆ°è©²ç¯‡ç« æœ€å¾Œä¸€å€‹å°ç¯€ï¼Œè®“æˆ‘å€‘æŠŠå‰©ä¸‹çš„æ–°å¢ã€ä¿®æ”¹ã€åˆªé™¤éƒ½åšå¥½å§ï¼ é€™æ˜¯æ¥çºŒå‰å…©å¤©çš„å¯¦ä½œï¼Œå¦‚æœä¸å¤ªæ¸…æ¥šçš„è©±è¨˜å¾—è¤‡ç¿’ä¸€ä¸‹å‰å…©å¤© ç¶œåˆæ‡‰ç”¨(2) ä½¿"><meta itemprop=datePublished content="2019-09-26T18:08:38+00:00"><meta itemprop=dateModified content="2019-09-26T18:08:38+00:00"><meta itemprop=wordCount content="2704"><meta itemprop=keywords content="laravel,"><meta name=twitter:card content="summary"><meta name=twitter:title content="ç¶œåˆæ‡‰ç”¨(4) ä½¿ç”¨ Laravel åšä¸€å€‹ç°¡å–®çš„éƒ¨è½æ ¼ï¼šè¤‡ç¿’-ä¸‹"><meta name=twitter:description content="æ¥ä¸‹ä¾†åˆ°è©²ç¯‡ç« æœ€å¾Œä¸€å€‹å°ç¯€ï¼Œè®“æˆ‘å€‘æŠŠå‰©ä¸‹çš„æ–°å¢ã€ä¿®æ”¹ã€åˆªé™¤éƒ½åšå¥½å§ï¼ é€™æ˜¯æ¥çºŒå‰å…©å¤©çš„å¯¦ä½œï¼Œå¦‚æœä¸å¤ªæ¸…æ¥šçš„è©±è¨˜å¾—è¤‡ç¿’ä¸€ä¸‹å‰å…©å¤© ç¶œåˆæ‡‰ç”¨(2) ä½¿"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=/ class=logo>Jimmy's Code</a></div><div class=mobile-navbar-icon><span></span>
<span></span>
<span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><a href=/about/><li class=mobile-menu-item>About</li></a><a href=/categories/><li class=mobile-menu-item>Categories</li></a><a href=/tags/><li class=mobile-menu-item>Tags</li></a><a href=/posts/><li class=mobile-menu-item>Archives</li></a><a href=/search><li class=mobile-menu-item>ğŸ”</li></a></ul></nav><div class=container id=mobile-panel><header id=header class=header><div class=logo-wrapper><a href=/ class=logo>Jimmy's Code</a></div><nav class=site-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=/about/>About</a></li><li class=menu-item><a class=menu-item-link href=/categories/>Categories</a></li><li class=menu-item><a class=menu-item-link href=/tags/>Tags</a></li><li class=menu-item><a class=menu-item-link href=/posts/>Archives</a></li><li class=menu-item><a class=menu-item-link href=/search>ğŸ”</a></li></ul></nav></header><main id=main class=main><div class=content-wrapper><div id=content class=content><article class=post><header class=post-header><h1 class=post-title>ç¶œåˆæ‡‰ç”¨(4) ä½¿ç”¨ Laravel åšä¸€å€‹ç°¡å–®çš„éƒ¨è½æ ¼ï¼šè¤‡ç¿’-ä¸‹</h1><div class=post-meta><span class=post-time>2019-09-26</span><div class=post-category><a href=/categories/ithome/>ithome</a></div></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title>Contents</h2><div class=post-toc-content><nav id=TableOfContents><ul><li><a href=#æ–°å¢æ–‡ç« >æ–°å¢æ–‡ç« </a><ul><li><a href=#articlecontrollercreate>ArticleController@create</a></li><li><a href=#èªªæ˜>èªªæ˜</a></li><li><a href=#articlecontrollerstore>ArticleController@store</a></li><li><a href=#èªªæ˜-1>èªªæ˜</a></li></ul></li><li><a href=#ä¿®æ”¹æ–‡ç« >ä¿®æ”¹æ–‡ç« </a><ul><li><a href=#articlecontrolleredit>ArticleController@edit</a></li><li><a href=#articlecontrollerupdate>ArticleController@update</a></li></ul></li><li><a href=#åˆªé™¤æ–‡ç« >åˆªé™¤æ–‡ç« </a><ul><li><a href=#articlecontrollerdestroy>ArticleController@destroy</a></li></ul></li><li><a href=#çµèª>çµèª</a></li></ul></nav></div></div><div class=post-content><p>æ¥ä¸‹ä¾†åˆ°è©²ç¯‡ç« æœ€å¾Œä¸€å€‹å°ç¯€ï¼Œè®“æˆ‘å€‘æŠŠå‰©ä¸‹çš„æ–°å¢ã€ä¿®æ”¹ã€åˆªé™¤éƒ½åšå¥½å§ï¼
é€™æ˜¯æ¥çºŒå‰å…©å¤©çš„å¯¦ä½œï¼Œå¦‚æœä¸å¤ªæ¸…æ¥šçš„è©±è¨˜å¾—è¤‡ç¿’ä¸€ä¸‹å‰å…©å¤©</p><ul><li><a href=https://ithelp.ithome.com.tw/articles/10220383>ç¶œåˆæ‡‰ç”¨(2) ä½¿ç”¨ Laravel åšä¸€å€‹ç°¡å–®çš„éƒ¨è½æ ¼ï¼šè¤‡ç¿’-ä¸Š</a></li><li><a href=https://ithelp.ithome.com.tw/articles/10221135>ç¶œåˆæ‡‰ç”¨(3) ä½¿ç”¨ Laravel åšä¸€å€‹ç°¡å–®çš„éƒ¨è½æ ¼ï¼šè¤‡ç¿’-ä¸­</a></li></ul><p>æ–°å¢æ–‡ç« å°æ–¼ RESTFul API çš„æ¦‚å¿µä¾†èªªï¼Œä»–æ˜¯ä¸€ç¨®<code>POST</code>ï¼Œå°æ–¼ç¶²å€ä¾†èªªä»¥ Article ç‚ºä¾‹å‰‡æ˜¯<code>http://127.0.0.1:8000/article</code>ï¼Œç„¶è€Œï¼Œé€™å€‹ç¶²å€å…¶å¯¦æ­£ä¹Ÿæ˜¯<code>index</code>çš„ç¶²ç«™(ä¸éä»–æ˜¯ç”¨<code>GET</code>çš„æ–¹æ³•)&mldr;.ä½†æ˜¯ï¼Œ<strong>æˆ‘å€‘è¦æ€éº¼å‚³è¦æ–°å¢çš„è³‡æ–™å‘¢ï¼Ÿæ€éº¼è¾¦ï¼Ÿ</strong></p><p>å› æ­¤å°æ–¼ Laravel ä¾†èªªï¼Œä»–åœ¨ç¶²å€å¾Œé¢ä¹Ÿå¢åŠ äº†ä¸€å€‹é—œéµå­—ï¼š<code>create</code>ä½œç‚ºè­˜åˆ¥ï¼Œä»¥å‘Šè¨´ç€è¦½å™¨ï¼Œé€™æ˜¯ä¸€å€‹å‰µå»ºæ–‡ç« çš„é é¢ï¼Œ<strong>ä¸æ˜¯åˆ—è¡¨ index çš„é é¢å–”</strong>ï¼Œç„¶å¾Œç”¨ form POST çš„æ–¹å¼ï¼Œå°‡æ–°å¢æ–‡ç« å»ºç«‹å¥½ã€‚<strong>åŒç†å…¶å¯¦èˆ‡ä¿®æ”¹æ–‡ç« çš„æ¨¡å¼ä¸€æ¨£ï¼ŒC å’Œ U æœ‰å…©å€‹é é¢ï¼ŒC å°æ‡‰åˆ° create()å’Œ store()ï¼Œè€Œ U å°æ‡‰åˆ° edit()å’Œ update()</strong></p><h1 id=æ–°å¢æ–‡ç« >æ–°å¢æ–‡ç« </h1><p>ä¹‹å‰æˆ‘å€‘èªªåˆ° CRUDï¼Œè€Œ C å°±å°æ‡‰åˆ° controller çš„ create()å’Œ store()</p><h2 id=articlecontrollercreate>ArticleController@create</h2><p>åªæ˜¯å‚³ä¸€å€‹é é¢ï¼Œå’Œ Show()å¾ˆåƒï¼Œå‚³ä¸€å€‹ view çµ¦ä»–å°±å¥½</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>    public function create()
</span></span><span class=line><span class=cl>    {
</span></span><span class=line><span class=cl>        return view(&#39;articles.create&#39;);
</span></span><span class=line><span class=cl>    }
</span></span></code></pre></td></tr></table></div></div><p>åˆ¥å¿˜äº†æˆ‘å€‘è¦åšä¸€å€‹<code>articles/create.blade.php</code>å–”ï¼Œå¦‚ä¸‹</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>@extends(&#39;layouts.layout&#39;)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>@section(&#39;content&#39;)
</span></span><span class=line><span class=cl>&lt;h1 class=&#34;font-bold&#34;&gt;æ–°å¢æ–‡ç« &lt;/h1&gt;
</span></span><span class=line><span class=cl>&lt;form class=&#34;bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4&#34; action=&#34;{{ route(&#39;article.store&#39;)}}&#34; method=&#34;post&#34;&gt;
</span></span><span class=line><span class=cl>    @csrf
</span></span><span class=line><span class=cl>    &lt;div class=&#34;mb-4&#34;&gt;
</span></span><span class=line><span class=cl>        &lt;label class=&#34;block text-gray-700 text-sm font-bold mb-2&#34; for=&#34;title&#34;&#34;&gt;
</span></span><span class=line><span class=cl>            æ¨™é¡Œ
</span></span><span class=line><span class=cl>        &lt;/label&gt;
</span></span><span class=line><span class=cl>        &lt;input class=&#34; shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight
</span></span><span class=line><span class=cl>            focus:outline-none focus:shadow-outline&#34; type=&#34; text&#34; name=&#34;title&#34; id=&#34;title&#34;&gt;
</span></span><span class=line><span class=cl>    &lt;/div&gt;
</span></span><span class=line><span class=cl>    &lt;div class=&#34;mb-4&#34;&gt;
</span></span><span class=line><span class=cl>        &lt;label class=&#34;block text-gray-700 text-sm font-bold mb-2&#34; for=&#34;content&#34;&gt;
</span></span><span class=line><span class=cl>            å…§å®¹
</span></span><span class=line><span class=cl>        &lt;/label&gt;
</span></span><span class=line><span class=cl>        &lt;textarea
</span></span><span class=line><span class=cl>            class=&#34;shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline&#34;
</span></span><span class=line><span class=cl>            name=&#34;content&#34; id=&#34;content&#34; cols=&#34;30&#34; rows=&#34;10&#34;&gt;&lt;/textarea&gt;
</span></span><span class=line><span class=cl>    &lt;/div&gt;
</span></span><span class=line><span class=cl>    &lt;button
</span></span><span class=line><span class=cl>        class=&#34;bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline&#34;
</span></span><span class=line><span class=cl>        type=&#34;submit&#34;&gt;æ–°å¢&lt;/button&gt;
</span></span><span class=line><span class=cl>&lt;/form&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>@endsection
</span></span></code></pre></td></tr></table></div></div><p>PS.tailwindcss çš„éº»ç…©ä¹‹è™•å°±æ˜¯ä»–çš„ class åç¨±æœƒè®Šå¾—å¥½é•·å¥½é•· XD
åœ¨<code>php artisan serve</code>
æ¥ä¸‹ä¾†ä½ é€²å…¥<code>http://127.0.0.1:8000/article/create</code>å°±å¯ä»¥çœ‹åˆ°æˆ‘å€‘è¦çš„æ–°å¢æ–‡ç« è¡¨å–®å›‰ï½
<img src=https://ithelp.ithome.com.tw/upload/images/20190927/20106999SwQBKHVAIF.png alt=https://ithelp.ithome.com.tw/upload/images/20190927/20106999SwQBKHVAIF.png></p><h2 id=èªªæ˜>èªªæ˜</h2><ul><li>@csrf æ˜¯ Blade çš„ç”¨æ³•ï¼Œå¦‚æœä½ æœ‰ç”¨åˆ° Laravel çš„è¡¨å–®ï¼Œé‚£éº¼é€™å€‹æ±è¥¿ä½ æ˜¯ä¸€å®šè¦åŠ çš„ï¼Œé™¤éä½ æŠŠç®¡ csrf çš„ Middleware å…ˆé—œæ‰ï¼Œé—œæ–¼ Middleware çš„éƒ¨åˆ†æˆ‘å€‘ä»¥å¾Œæœƒå†èªªæ˜ï¼Œç¸½ä¹‹é€™æ˜¯ä¸€ç¨®è³‡å®‰çš„é˜²ç¦¦æ‰‹æ®µï¼Œéœ€è¦åŠ å…¥é€™å€‹éƒ¨åˆ†ï¼Œæƒ³æ›´å¤šäº†è§£å¯ä»¥åˆ°æ­¤ï¼šhttps://laravel.com/docs/5.8/csrf</li></ul><h2 id=articlecontrollerstore>ArticleController@store</h2><p>ç•¶è¡¨å–®é€å‡ºå»å¾Œï¼Œå°±æœƒåˆ°é€™å€‹<code>store</code>çš„ functionï¼Œä¹‹å‰ç¬¬äºŒå¤© MVC æœ‰è«‡åˆ°ï¼Œå¦‚æœä¸çŸ¥é“çš„å¯ä»¥åˆ°é€™è£¡ï¼š<a href=https://ithelp.ithome.com.tw/articles/10216225>ä¾†è«‡ä»€éº¼æ˜¯ MVC</a></p><p>çµè«–å°±æ˜¯å¦‚åŒæˆ‘å€‘ç¾åœ¨æ‰€å¯¦ä½œçš„é€™æ¨£ï¼ŒView ä¸å¯èƒ½ç›´æ¥å°ï¼­ odel ä½œç”¨ï¼Œè€Œéœ€è¦é€éè¡¨å–®å‚³é€çµ¦ Controller ä¾†å° Model åšèª¿æ•´ã€‚
æ‰€ä»¥<code>Store()</code>é€™å€‹éƒ¨åˆ†æ‰¿æ¥äº†è¡¨å–®å‚³éä¾†çš„è³‡æ–™ã€å° Model ä½œç”¨ä¸”è¦å°å‘é é¢&mldr;æ‰€ä»¥æˆ‘å€‘çš„ store å¯ä»¥é€™éº¼å¯«</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>    public function store(Request $request)
</span></span><span class=line><span class=cl>    {
</span></span><span class=line><span class=cl>        $title = $request-&gt;title;
</span></span><span class=line><span class=cl>        $content = $request-&gt;content;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        $article = new Article();
</span></span><span class=line><span class=cl>        $article-&gt;title = $title;
</span></span><span class=line><span class=cl>        $article-&gt;content = $content;
</span></span><span class=line><span class=cl>        $article-&gt;save();
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        return redirect(route(&#39;article.index&#39;));
</span></span><span class=line><span class=cl>    }
</span></span></code></pre></td></tr></table></div></div><p>ä¹‹å¾Œæˆ‘å€‘åœ¨æ–°å¢é é¢æ–°å¢å®Œè³‡æ–™å°±æœƒå›åˆ°åˆ—è¡¨é å›‰ï¼Œè€Œåœ¨åˆ—è¡¨é è£¡é¢ä¹Ÿå°±æœ‰æˆ‘å€‘æ–°å¢çš„ä¸€ç­†æ–°æ–‡ç« ã€‚</p><h2 id=èªªæ˜-1>èªªæ˜</h2><ul><li>redirect å°±æ˜¯é‡æ–°å°å‘ï¼Œæ­¤ç¯„ä¾‹å°±æ˜¯å°å‘åˆ°æ–‡ç« åˆ—è¡¨</li><li>è€Œæˆ‘å€‘å¯ä»¥è—‰ç”± new ä¸€å€‹æ–°çš„ modelï¼Œç„¶å¾Œå°ä»–å¡«å…¥è³‡æ–™ã€ä¹‹å¾Œä½¿ç”¨<code>save()</code> é€™å€‹ function å°±å¯ä»¥å¹«åŠ©æˆ‘å€‘å°è³‡æ–™åº«å¯«å…¥è³‡æ–™</li></ul><h1 id=ä¿®æ”¹æ–‡ç« >ä¿®æ”¹æ–‡ç« </h1><p>ä¿®æ”¹æ–‡ç« çš„éƒ¨åˆ†å…¶å¯¦å’Œæ–°å¢æ–‡ç« å¾ˆç›¸ä¼¼ï¼Œ
U å°±å°æ‡‰åˆ° controller çš„ edit()å’Œ update()
åªæ˜¯æ¯”è¼ƒç‰¹åˆ¥çš„æ˜¯ HTTP è£¡é¢åªæœ‰ GET å’Œ POST çš„æ–¹æ³•ï¼Œå¦‚ä½•å¯¦ç¾ PUT/PATCH å‘¢ï¼Ÿ
æˆ‘ç¾åœ¨å…ˆæŠŠç¨‹å¼ç¢¼ç¯„ä¾‹æ”¾ä¸Šä¾†ï¼Œå¦‚æœéœ€è¦èªªæ˜çš„æœƒå†åšæ›´å¤šèªªæ˜ï½</p><h2 id=articlecontrolleredit>ArticleController@edit</h2><p>å’Œ Create ä¸€æ¨£ç°¡å–®ï¼Œå°±æ˜¯å›å‚³ä¸€å€‹å¯ä»¥è®“æˆ‘å€‘æ›´æ–°çš„é é¢è€Œå·²ï¼Œä¸éæˆ‘å€‘ä¹Ÿè¦æŠŠæº–å‚™è¦è¢«ä¿®æ”¹çš„è³‡æ–™ä¸€èµ·å‚³åˆ° blade çµ¦ä»–å–”ï¼Œæ‰€ä»¥åœ¨å¾Œé¢å¢åŠ äº†<code>withArticle</code>ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>    public function edit(Article $article)
</span></span><span class=line><span class=cl>    {
</span></span><span class=line><span class=cl>        return view(&#39;articles.edit&#39;)-&gt;withArticle($article);
</span></span><span class=line><span class=cl>    }
</span></span></code></pre></td></tr></table></div></div><p>è€Œ<code>edit.blade.php</code>å’Œ<code>Create.blade.php</code>éå¸¸åƒï¼Œå…¶å¯¦æˆ‘å€‘åªè¦æŠŠ$article çš„å€¼å¡«å…¥è¡¨å–®ï¼Œå¦å¤–<strong>ä½¿ç”¨@method(&lsquo;PUT&rsquo;)ï¼Œå°‡ form çš„ action æ”¹ç‚º<code>route('article.update',$article->id)</code>å°±å¥½äº†å•Š</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>@extends(&#39;layouts.layout&#39;)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>@section(&#39;content&#39;)
</span></span><span class=line><span class=cl>&lt;h1 class=&#34;font-bold&#34;&gt;ç·¨è¼¯æ–‡ç« &lt;/h1&gt;
</span></span><span class=line><span class=cl>&lt;form class=&#34;bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4&#34; action=&#34;{{ route(&#39;article.update&#39;,$article-&gt;id)}}&#34;
</span></span><span class=line><span class=cl>    method=&#34;post&#34;&gt;
</span></span><span class=line><span class=cl>    @csrf
</span></span><span class=line><span class=cl>    @method(&#39;PUT&#39;)
</span></span><span class=line><span class=cl>    &lt;div class=&#34;mb-4&#34;&gt;
</span></span><span class=line><span class=cl>        &lt;label class=&#34;block text-gray-700 text-sm font-bold mb-2&#34; for=&#34;title&#34;&#34;&gt;
</span></span><span class=line><span class=cl>            æ¨™é¡Œ
</span></span><span class=line><span class=cl>        &lt;/label&gt;
</span></span><span class=line><span class=cl>        &lt;input class=&#34; shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight
</span></span><span class=line><span class=cl>            focus:outline-none focus:shadow-outline&#34; type=&#34; text&#34; name=&#34;title&#34; id=&#34;title&#34; value={{ $article-&gt;title }}&gt;
</span></span><span class=line><span class=cl>    &lt;/div&gt;
</span></span><span class=line><span class=cl>    &lt;div class=&#34;mb-4&#34;&gt;
</span></span><span class=line><span class=cl>        &lt;label class=&#34;block text-gray-700 text-sm font-bold mb-2&#34; for=&#34;content&#34;&gt;
</span></span><span class=line><span class=cl>            å…§å®¹
</span></span><span class=line><span class=cl>        &lt;/label&gt;
</span></span><span class=line><span class=cl>        &lt;textarea
</span></span><span class=line><span class=cl>            class=&#34;shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline&#34;
</span></span><span class=line><span class=cl>            name=&#34;content&#34; id=&#34;content&#34; cols=&#34;30&#34; rows=&#34;10&#34;&gt;{{ $article-&gt;content }}&lt;/textarea&gt;
</span></span><span class=line><span class=cl>    &lt;/div&gt;
</span></span><span class=line><span class=cl>    &lt;button
</span></span><span class=line><span class=cl>        class=&#34;bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline&#34;
</span></span><span class=line><span class=cl>        type=&#34;submit&#34;&gt;æ›´æ–°&lt;/button&gt;
</span></span><span class=line><span class=cl>&lt;/form&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>@endsection
</span></span></code></pre></td></tr></table></div></div><p>æ¥ä¸‹ä¾†å°±åˆ°<code>http://127.0.0.1:8000/article/1/edit</code>å°±çœ‹åˆ°å¯ä»¥ä¿®æ”¹çš„é é¢å›‰ï½
<img src=https://ithelp.ithome.com.tw/upload/images/20190927/20106999LfmhYgSZU0.png alt=https://ithelp.ithome.com.tw/upload/images/20190927/20106999LfmhYgSZU0.png></p><h2 id=articlecontrollerupdate>ArticleController@update</h2><p>æ¥ä¸‹ä¾†è®“æˆ‘å€‘å¯«ä¸€ä¸‹ä¿®æ”¹æ–‡ç« çš„é‚è¼¯å§ï¼ å…¶å¯¦ä¹Ÿæ˜¯å’Œ<code>store()</code>é¡ä¼¼ï¼Œåªæ˜¯ä¸éœ€è¦ new å‡ºä¸€å€‹æ–°çš„ article äº†ï¼Œæˆ‘å€‘ç›´æ¥å°ä»–æ“ä½œå°±å¥½äº†å–”</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>    public function update(Request $request, Article $article)
</span></span><span class=line><span class=cl>    {
</span></span><span class=line><span class=cl>        $title = $request-&gt;title;
</span></span><span class=line><span class=cl>        $content = $request-&gt;content;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        $article-&gt;title = $title;
</span></span><span class=line><span class=cl>        $article-&gt;content = $content;
</span></span><span class=line><span class=cl>        $article-&gt;save();
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        return redirect(route(&#39;article.index&#39;));
</span></span><span class=line><span class=cl>    }
</span></span></code></pre></td></tr></table></div></div><p>æ¥ä¸‹ä¾†é€å‡ºæ›´æ–°çš„è¡¨å–®å°±å¾ˆå¿«çœ‹åˆ°åˆ—è¡¨ä¸Šçš„æ–‡ç« è¢«æ›´æ–°å•¦ï½ æ’’èŠ±ï½ï½ï½</p><h1 id=åˆªé™¤æ–‡ç« >åˆªé™¤æ–‡ç« </h1><p>çµ‚æ–¼ä¾†åˆ°æœ€å¾Œçš„åˆªé™¤æ–‡ç« ï¼Œå°æ–¼ Controller ä¾†èªªä»–å°±æ˜¯<code>destroy()</code>é€™å€‹æ–¹æ³•ï¼Œå¾ RESTFul API è®€åˆ°å®ƒå°±æ˜¯ä½¿ç”¨<code>Delete</code>æ–¹æ³•ï¼Œå‰›å‰›æˆ‘å€‘å¾<code>edit.blade.php</code>å¾—çŸ¥æˆ‘å€‘å¯ä»¥ä½¿ç”¨<code>@method()</code>é€™å€‹éƒ¨åˆ†ï¼Œä½†é€™å€‹é€šå¸¸è¦<code>åŠ å…¥ä¸€å€‹POSTè¡¨å–®</code>ä¸€èµ·æ‰æœƒç”Ÿæ•ˆï¼Œæ‰€ä»¥è®“æˆ‘å€‘ä¿®æ”¹ä¸€ä¸‹æ–‡ç« åˆ—è¡¨çš„éƒ¨åˆ†ï½
åŸæœ¬çš„åœ¨<code>index.blade.php</code>åˆªé™¤æŒ‰éˆ•çš„éƒ¨åˆ†ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;a href=&#34;{{ route(&#39;article.destroy&#39;,$article-&gt;id ) }}&#34;&gt;åˆªé™¤&lt;/a&gt;
</span></span></code></pre></td></tr></table></div></div><p>æˆ‘å€‘å¯ä»¥åŠ å…¥è¡¨å–®ï¼Œè®“ä»–è®Šæˆ</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>&lt;form method=&#34;POST&#34; action=&#34;{{ route(&#39;article.destroy&#39;,$article-&gt;id ) }}&#34;&gt;
</span></span><span class=line><span class=cl>    @csrf
</span></span><span class=line><span class=cl>    @method(&#39;delete&#39;)
</span></span><span class=line><span class=cl>    &lt;button type=&#34;submit&#34;&gt;åˆªé™¤&lt;/button&gt;
</span></span><span class=line><span class=cl>&lt;/form&gt;
</span></span></code></pre></td></tr></table></div></div><p>ç„¶å¾Œé–‹å§‹å¯«æˆ‘å€‘çš„åˆªé™¤æµç¨‹å›‰ï½</p><h2 id=articlecontrollerdestroy>ArticleController@destroy</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>    public function destroy(Article $article)
</span></span><span class=line><span class=cl>    {
</span></span><span class=line><span class=cl>        $article-&gt;delete();
</span></span><span class=line><span class=cl>        return redirect(route(&#39;article.index&#39;));
</span></span><span class=line><span class=cl>    }
</span></span></code></pre></td></tr></table></div></div><p>ä¹‹å¾Œä½ æŒ‰åˆªé™¤å°±æœƒæŠŠä½ é¸å¾—é‚£ä¸€ç¯‡æ–‡ç« åˆªé™¤äº†å‘¢ï¼</p><p>è¦çœ‹å®Œæˆç¨‹å¼ç¢¼çš„å¯ä»¥åƒè€ƒé€™è£¡ï¼šhttps://github.com/r567tw/Make-PHP-Great-Again/commit/30f58366dbbcd4377bc9b0d92e231739ead5ffd5</p><h1 id=çµèª>çµèª</h1><p>ä»¥ä¸Šå°±æ˜¯åˆ©ç”¨ RESTFul API æ‰€åšçš„ä¸€å€‹æ¥µç°¡å–®çš„æ–‡ç« ç®¡ç†æˆ–è€…éƒ¨è½æ ¼å°ˆæ¡ˆï¼Œç•¶ç„¶ï¼Œç¾å¯¦ä¸–ç•Œä¸­æ ¹æœ¬ä¸å¯èƒ½é€™éº¼ç°¡å–®ï¼Œé‚„è¨˜å¾—æˆ‘å€‘å‰›å‰›ä¸€ç›´åœ¨ç”¨çš„<code>@csrf</code>å—ï¼Ÿé‚£æ˜¯ Laravel å…¶ä¸­ä¸€å€‹ Middlewareï¼Œå¦å¤–æˆ‘å€‘æ–°å¢èˆ‡ä¿®æ”¹ä¹Ÿä¸æœƒé€™éº¼ç°¡å–®ï¼Œåœ¨ç¶²é ä¸–ç•Œè£¡ï¼Œæˆ‘å€‘è¦ç•¶<code>ä½¿ç”¨è€…æ˜¯å¾ˆå±éšªçš„ä¸€ç¨®ç”Ÿç‰©</code>ï¼Œä¸€å®šæœ‰æ™‚å€™æœƒæœ‰äº‚å¯«ã€ä¸ç¬¦åˆæ ¼å¼ä¹‹é¡çš„ï¼Œæ‰€ä»¥<code>é©—è­‰</code>å› æ‡‰è€Œç”Ÿã€‚å› æ­¤ï¼Œä¹‹å¾Œ<code>è®“PHPå†æ¬¡å‰å¤§ï¼Œä½¿ç”¨Laravel</code>å°‡æœƒé€²å…¥ä¸€å€‹æ–°çš„ç« ç¯€ï¼Œé–‹å§‹è¨è«–é—œæ–¼ Laravel è£¡é¢æœ‰çš„æ·±åº¦å·¥å…·èˆ‡ç”¨æ³•ï¼Œè¨˜å¾—è¦è¨‚é–±æˆ‘å–”ï¼(<del>é›–ç„¶æˆ‘ä¸ä¸€å®šæŠŠæ¡æœƒå¯«å¾—å¾ˆå¥½å°±æ˜¯äº†</del>)</p><p>å¦å¤–ï¼Œè—‰ç”±é€™å››ç¯‡çš„å°å°ˆæ¡ˆæ•™å­¸ä¹Ÿç®—æ˜¯è¦ç¶œåˆå‰å¹¾å¤©çš„æ‰€å¯«æ‰€å­¸ï¼Œç•¢ç«Ÿæˆ‘ä¸¦ä¸è¦ºå¾—è‡ªå·±å‰å¹¾å¤©å¯«å¾—å¾ˆå¥½ï¼Œå¸Œæœ›è—‰ç”±é€™æ¨£çš„å°å¯¦ä½œå¯ä»¥è®“ä½ å€‘æ›´äº†è§£æ€éº¼ä½¿ç”¨ Laravelï¼Œå¦‚æœæœ‰ç–‘å•çš„æ­¡è¿åœ¨åº•ä¸‹ç™¼å•ï¼Œé€™æ¨£æ‰å¯ä»¥æˆç‚ºæˆ‘ä¸‹ä¸€æ¬¡å¯«æŠ€è¡“æ–‡çš„é¤Šåˆ†ï¼ŒçŸ¥é“è‡ªå·±æ‡‰è©²è¦æ€éº¼å¯«æœƒè®“äººæ›´åŠ æ˜ç­ï½ï½</p></div><footer class=post-footer><div class=post-tags><a href=/tags/laravel/>laravel</a></div><nav class=post-nav><a class=prev href=/posts/2019-09-28-laravel-auth-%E7%82%BA%E7%B6%B2%E7%AB%99%E5%8A%A0%E5%85%A5%E6%9C%83%E5%93%A1%E5%9B%89/><i class="iconfont icon-left"></i>
<span class="prev-text nav-default">Laravel Auth: ç‚ºç¶²ç«™åŠ å…¥æœƒå“¡å›‰ï½</span>
<span class="prev-text nav-mobile">Prev</span></a>
<a class=next href=/posts/2019-09-26-%E7%B6%9C%E5%90%88%E6%87%89%E7%94%A83-%E4%BD%BF%E7%94%A8-laravel-%E5%81%9A%E4%B8%80%E5%80%8B%E7%B0%A1%E5%96%AE%E7%9A%84%E9%83%A8%E8%90%BD%E6%A0%BC%E8%A4%87%E7%BF%92-%E4%B8%AD/><span class="next-text nav-default">ç¶œåˆæ‡‰ç”¨(3) ä½¿ç”¨ Laravel åšä¸€å€‹ç°¡å–®çš„éƒ¨è½æ ¼ï¼šè¤‡ç¿’-ä¸­</span>
<span class="next-text nav-mobile">Next</span>
<i class="iconfont icon-right"></i></a></nav></footer></article></div><script src=https://utteranc.es/client.js repo=r567tw/r567tw.github.io issue-term=pathname theme=github-light crossorigin=anonymous async></script><noscript>Please enable JavaScript to view the <a href=https://github.com/utterance>comments powered by utterances.</a></noscript></div></main><footer id=footer class=footer><div class=social-links><a href=mailto:r567tw@gmail.com class="iconfont icon-email" title=email></a>
<a href=https://www.linkedin.com/in/wei-jun-fang/ class="iconfont icon-linkedin" title=linkedin></a>
<a href=https://github.com/r567tw class="iconfont icon-github" title=github></a>
<a href=https://jimmycode.tw/index.xml type=application/rss+xml class="iconfont icon-rss" title=rss></a></div><div class=copyright><span class=power-by>Powered by <a class=hexo-link href=https://gohugo.io>Hugo</a></span>
<span class=division>|</span>
<span class=theme-info>Theme -
<a class=theme-link href=https://github.com/olOwOlo/hugo-theme-even>Even</a></span>
<span class=copyright-year>&copy;
2017 -
2022<span class=heart><i class="iconfont icon-heart"></i></span>
<span>r567tw</span></span></div></footer><div class=back-to-top id=back-to-top><i class="iconfont icon-up"></i></div></div><script src=https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin=anonymous></script>
<script type=text/javascript src=/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js></script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-Q6QSQHD62T","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>